import{d as Q,e as w,f as z,Q as A}from"./QBtn.12f37358.js";import{Q as K}from"./QInput.9f5ef848.js";import{c as R,u as U,a as H}from"./use-router-link.4ee5d1c3.js";import{b as W}from"./format.2a3572e1.js";import{x as n,r as D,H as G,h as x,n as J,z as X,d as Y,u as Z,a0 as ee,o as te,i as ae}from"./index.aaf166e5.js";const se={name:"Tfoot",props:{colspan:String},render:()=>null};function C(e,g){return[!0,!1].includes(e)?e:g}var ne=R({name:"QPagination",props:{...U,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||Q.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:g}){const{proxy:h}=J(),{$q:s}=h,P=H(e,s),u=n(()=>parseInt(e.min,10)),l=n(()=>parseInt(e.max,10)),m=n(()=>parseInt(e.maxPages,10)),k=n(()=>v.value+" / "+l.value),p=n(()=>C(e.boundaryLinks,e.input)),i=n(()=>C(e.boundaryNumbers,!e.input)),c=n(()=>C(e.directionLinks,e.input)),b=n(()=>C(e.ellipses,!e.input)),B=D(null),v=n({get:()=>e.modelValue,set:t=>{if(t=parseInt(t,10),e.disable||isNaN(t))return;const a=W(t,u.value,l.value);e.modelValue!==a&&g("update:modelValue",a)}});G(()=>`${u.value}|${l.value}`,()=>{v.value=e.modelValue});const M=n(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),F=n(()=>e.gutter in w?`${w[e.gutter]}px`:e.gutter||null),$=n(()=>F.value!==null?`--q-pagination-gutter-parent:-${F.value};--q-pagination-gutter-child:${F.value}`:null),V=n(()=>{const t=[e.iconFirst||s.iconSet.pagination.first,e.iconPrev||s.iconSet.pagination.prev,e.iconNext||s.iconSet.pagination.next,e.iconLast||s.iconSet.pagination.last];return s.lang.rtl===!0?t.reverse():t}),T=n(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),N=n(()=>z(e,"flat")),E=n(()=>({[N.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),L=n(()=>{const t={[N.value]:!1};return e.activeDesign!==""&&(t[e.activeDesign]=!0),t}),I=n(()=>({...L.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),f=n(()=>{let t=Math.max(m.value,1+(b.value?2:0)+(i.value?2:0));const a={pgFrom:u.value,pgTo:l.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(l.value).length)}em`}};return m.value&&t<l.value-u.value+1&&(t=1+Math.floor(t/2)*2,a.pgFrom=Math.max(u.value,Math.min(l.value-t+1,e.modelValue-Math.floor(t/2))),a.pgTo=Math.min(l.value,a.pgFrom+t-1),i.value&&(a.boundaryStart=!0,a.pgFrom++),b.value&&a.pgFrom>u.value+(i.value?1:0)&&(a.ellipsesStart=!0,a.pgFrom++),i.value&&(a.boundaryEnd=!0,a.pgTo--),b.value&&a.pgTo<l.value-(i.value?1:0)&&(a.ellipsesEnd=!0,a.pgTo--)),a});function q(t){v.value=t}function O(t){v.value=v.value+t}const j=n(()=>{function t(){v.value=B.value,B.value=null}return{"onUpdate:modelValue":a=>{B.value=a},onKeyup:a=>{X(a,13)===!0&&t()},onBlur:t}});function r(t,a,y){const d={"aria-label":a,"aria-current":"false",...E.value,...t};return y===!0&&Object.assign(d,{"aria-current":"true",...I.value}),a!==void 0&&(e.toFn!==void 0?d.to=e.toFn(a):d.onClick=()=>{q(a)}),x(A,d)}return Object.assign(h,{set:q,setByOffset:O}),()=>{const t=[],a=[];let y;if(p.value===!0&&(t.push(r({key:"bls",disable:e.disable||e.modelValue<=u.value,icon:V.value[0]},u.value)),a.unshift(r({key:"ble",disable:e.disable||e.modelValue>=l.value,icon:V.value[3]},l.value))),c.value===!0&&(t.push(r({key:"bdp",disable:e.disable||e.modelValue<=u.value,icon:V.value[1]},e.modelValue-1)),a.unshift(r({key:"bdn",disable:e.disable||e.modelValue>=l.value,icon:V.value[2]},e.modelValue+1))),e.input!==!0){y=[];const{pgFrom:d,pgTo:_,marginalStyle:S}=f.value;if(f.value.boundaryStart===!0){const o=u.value===e.modelValue;t.push(r({key:"bns",style:S,disable:e.disable,label:u.value},u.value,o))}if(f.value.boundaryEnd===!0){const o=l.value===e.modelValue;a.unshift(r({key:"bne",style:S,disable:e.disable,label:l.value},l.value,o))}f.value.ellipsesStart===!0&&t.push(r({key:"bes",style:S,disable:e.disable,label:"\u2026",ripple:!1},d-1)),f.value.ellipsesEnd===!0&&a.unshift(r({key:"bee",style:S,disable:e.disable,label:"\u2026",ripple:!1},_+1));for(let o=d;o<=_;o++)y.push(r({key:`bpg${o}`,style:S,disable:e.disable,label:o},o,o===e.modelValue))}return x("div",{class:M.value,...T.value},[x("div",{class:"q-pagination__content row no-wrap items-center",style:$.value},[...t,e.input===!0?x(K,{class:"inline",style:{width:`${k.value.length/1.5}em`},type:"number",dense:!0,value:B.value,disable:e.disable,dark:P.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:k.value,min:u.value,max:l.value,...j.value}):x("div",{class:"q-pagination__middle row justify-center"},y),...a])])}}});const de=Y({__name:"Pagination",props:{total:null},emits:["changePage"],setup(e,{emit:g}){const h=e,s=Z(),P=ee(),{page:u,perpage:l}=P.query,m=D(u&+u||1);async function k(i){const{query:c}=P;await s.push({query:{...c,page:i}}),g("changePage",i)}function p(){let i=+l;return isNaN(i)&&(i=5),Math.ceil(h.total/i)}return(i,c)=>(te(),ae(ne,{size:"1rem",modelValue:m.value,"onUpdate:modelValue":[c[0]||(c[0]=b=>m.value=b),k],max:p(),"max-pages":"5","direction-links":"","boundary-links":""},null,8,["modelValue","max"]))}});export{de as _,se as a};
