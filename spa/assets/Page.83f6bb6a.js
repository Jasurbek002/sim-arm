import{Q as xe,_ as qe}from"./QSpace.1d63dd3d.js";import{Q as ke,_ as ze}from"./QPage.f0120491.js";import{b as oe,Q as ne}from"./QBtn.12f37358.js";import{e as we,c as de,i as Ce,q as Ue,u as Be,a as Pe,v as Ee,Q as Ne}from"./use-router-link.4ee5d1c3.js";import{b as Re,h as ue}from"./format.2a3572e1.js";import{x as _,h as s,n as Z,r as k,C as ce,s as ve,O as je,q as $e,an as Le,H as Oe,E as Qe,ao as Te,K as De,ap as Ie,aq as Ae,d as fe,o as pe,i as me,w as W,a as $,g as Y,a1 as se,a8 as Me,f as He}from"./index.aaf166e5.js";import{Q as _e}from"./QCard.8a724209.js";import{Q as We}from"./QCardSection.849a9274.js";const Ve={...we,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},G=50,ge=2*G,he=ge*Math.PI,Xe=Math.round(he*1e3)/1e3;var Ke=de({name:"QCircularProgress",props:{...Ve,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:i}){const{proxy:{$q:t}}=Z(),p=Ce(e),u=_(()=>{const F=(t.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(t.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-F}deg)`:`rotate3d(0, 0, 1, ${F-90}deg)`}}),h=_(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),b=_(()=>ge/(1-e.thickness/2)),E=_(()=>`${b.value/2} ${b.value/2} ${b.value} ${b.value}`),B=_(()=>Re(e.value,e.min,e.max)),z=_(()=>he*(1-(B.value-e.min)/(e.max-e.min))),U=_(()=>e.thickness/2*b.value);function P({thickness:F,offset:a,color:o,cls:g,rounded:w}){return s("circle",{class:"q-circular-progress__"+g+(o!==void 0?` text-${o}`:""),style:h.value,fill:"transparent",stroke:"currentColor","stroke-width":F,"stroke-dasharray":Xe,"stroke-dashoffset":a,"stroke-linecap":w,cx:b.value,cy:b.value,r:G})}return()=>{const F=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&F.push(s("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:G-U.value/2,cx:b.value,cy:b.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&F.push(P({cls:"track",thickness:U.value,offset:0,color:e.trackColor})),F.push(P({cls:"circle",thickness:U.value,offset:z.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const a=[s("svg",{class:"q-circular-progress__svg",style:u.value,viewBox:E.value,"aria-hidden":"true"},F)];return e.showValue===!0&&a.push(s("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},i.default!==void 0?i.default():[s("div",B.value)])),s("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:p.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:B.value},Ue(i.internal,a))}}});function M(e,i,t,p){const u=[];return e.forEach(h=>{p(h)===!0?u.push(h):i.push({failedPropValidation:t,file:h})}),u}function V(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),ve(e)}const Ye={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Ge=["rejected"];function Ze({editable:e,dnd:i,getFileInput:t,addFilesToQueue:p}){const{props:u,emit:h,proxy:b}=Z(),E=k(null),B=_(()=>u.accept!==void 0?u.accept.split(",").map(r=>(r=r.trim(),r==="*"?"*/":(r.endsWith("/*")&&(r=r.slice(0,r.length-1)),r.toUpperCase()))):null),z=_(()=>parseInt(u.maxFiles,10)),U=_(()=>parseInt(u.maxTotalSize,10));function P(r){if(e.value)if(r!==Object(r)&&(r={target:null}),r.target!==null&&r.target.matches('input[type="file"]')===!0)r.clientX===0&&r.clientY===0&&ce(r);else{const x=t();x&&x!==r.target&&x.click(r)}}function F(r){e.value&&r&&p(null,r)}function a(r,x,L,O){let n=Array.from(x||r.target.files);const y=[],C=()=>{y.length>0&&h("rejected",y)};if(u.accept!==void 0&&B.value.indexOf("*/")===-1&&(n=M(n,y,"accept",v=>B.value.some(m=>v.type.toUpperCase().startsWith(m)||v.name.toUpperCase().endsWith(m))),n.length===0))return C();if(u.maxFileSize!==void 0){const v=parseInt(u.maxFileSize,10);if(n=M(n,y,"max-file-size",m=>m.size<=v),n.length===0)return C()}if(u.multiple!==!0&&n.length>0&&(n=[n[0]]),n.forEach(v=>{v.__key=v.webkitRelativePath+v.lastModified+v.name+v.size}),O===!0){const v=L.map(m=>m.__key);n=M(n,y,"duplicate",m=>v.includes(m.__key)===!1)}if(n.length===0)return C();if(u.maxTotalSize!==void 0){let v=O===!0?L.reduce((m,Q)=>m+Q.size,0):0;if(n=M(n,y,"max-total-size",m=>(v+=m.size,v<=U.value)),n.length===0)return C()}if(typeof u.filter=="function"){const v=u.filter(n);n=M(n,y,"filter",m=>v.includes(m))}if(u.maxFiles!==void 0){let v=O===!0?L.length:0;if(n=M(n,y,"max-files",()=>(v++,v<=z.value)),n.length===0)return C()}if(C(),n.length>0)return n}function o(r){V(r),i.value!==!0&&(i.value=!0)}function g(r){ve(r),(r.relatedTarget!==null||je.is.safari!==!0?r.relatedTarget!==E.value:document.elementsFromPoint(r.clientX,r.clientY).includes(E.value)===!1)===!0&&(i.value=!1)}function w(r){V(r);const x=r.dataTransfer.files;x.length>0&&p(null,x),i.value=!1}function f(r){if(i.value===!0)return s("div",{ref:E,class:`q-${r}__dnd absolute-full`,onDragenter:V,onDragover:V,onDragleave:g,onDrop:w})}return Object.assign(b,{pickFiles:P,addFiles:F}),{pickFiles:P,addFiles:F,onDragover:o,onDragleave:g,processFiles:a,getDndNode:f,maxFilesNumber:z,maxTotalSizeNumber:U}}function ie(e){return(e*100).toFixed(2)+"%"}const Je={...Be,...Ye,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},be=[...Ge,"start","finish","added","removed"];function et(e){const i=Z(),{props:t,slots:p,emit:u,proxy:h}=i,{$q:b}=h,E=Pe(t,b);function B(l,c,S){if(l.__status=c,c==="idle"){l.__uploaded=0,l.__progress=0,l.__sizeLabel=ue(l.size),l.__progressLabel="0.00%";return}if(c==="failed"){h.$forceUpdate();return}l.__uploaded=c==="uploaded"?l.size:S,l.__progress=c==="uploaded"?1:Math.min(.9999,l.__uploaded/l.size),l.__progressLabel=ie(l.__progress),h.$forceUpdate()}const z=_(()=>t.disable!==!0&&t.readonly!==!0),U=k(!1),P=k(null),F=k(null),a={files:k([]),queuedFiles:k([]),uploadedFiles:k([]),uploadedSize:k(0),updateFileStatus:B,isAlive:()=>Ee(i)===!1},{pickFiles:o,addFiles:g,onDragover:w,onDragleave:f,processFiles:r,getDndNode:x,maxFilesNumber:L,maxTotalSizeNumber:O}=Ze({editable:z,dnd:U,getFileInput:te,addFilesToQueue:ae});Object.assign(a,e({props:t,slots:p,emit:u,helpers:a})),a.isBusy===void 0&&(a.isBusy=k(!1));const n=k(0),y=_(()=>n.value===0?0:a.uploadedSize.value/n.value),C=_(()=>ie(y.value)),v=_(()=>ue(n.value)),m=_(()=>z.value===!0&&a.isUploading.value!==!0&&(t.multiple===!0||a.queuedFiles.value.length===0)&&(t.maxFiles===void 0||a.files.value.length<L.value)&&(t.maxTotalSize===void 0||n.value<O.value)),Q=_(()=>z.value===!0&&a.isBusy.value!==!0&&a.isUploading.value!==!0&&a.queuedFiles.value.length>0);$e(Le,le);const d=_(()=>"q-uploader column no-wrap"+(E.value===!0?" q-uploader--dark q-dark":"")+(t.bordered===!0?" q-uploader--bordered":"")+(t.square===!0?" q-uploader--square no-border-radius":"")+(t.flat===!0?" q-uploader--flat no-shadow":"")+(t.disable===!0?" disabled q-uploader--disable":"")+(U.value===!0?" q-uploader--dnd":"")),T=_(()=>"q-uploader__header"+(t.color!==void 0?` bg-${t.color}`:"")+(t.textColor!==void 0?` text-${t.textColor}`:""));Oe(a.isUploading,(l,c)=>{c===!1&&l===!0?u("start"):c===!0&&l===!1&&u("finish")});function I(){t.disable===!1&&(a.abort(),a.uploadedSize.value=0,n.value=0,ee(),a.files.value=[],a.queuedFiles.value=[],a.uploadedFiles.value=[])}function A(){t.disable===!1&&X(["uploaded"],()=>{a.uploadedFiles.value=[]})}function N(){X(["idle","failed"],({size:l})=>{n.value-=l,a.queuedFiles.value=[]})}function X(l,c){if(t.disable===!0)return;const S={files:[],size:0},R=a.files.value.filter(q=>l.indexOf(q.__status)===-1?!0:(S.size+=q.size,S.files.push(q),q.__img!==void 0&&window.URL.revokeObjectURL(q.__img.src),!1));S.files.length>0&&(a.files.value=R,c(S),u("removed",S.files))}function J(l){t.disable||(l.__status==="uploaded"?a.uploadedFiles.value=a.uploadedFiles.value.filter(c=>c.__key!==l.__key):l.__status==="uploading"?l.__abort():n.value-=l.size,a.files.value=a.files.value.filter(c=>c.__key!==l.__key?!0:(c.__img!==void 0&&window.URL.revokeObjectURL(c.__img.src),!1)),a.queuedFiles.value=a.queuedFiles.value.filter(c=>c.__key!==l.__key),u("removed",[l]))}function ee(){a.files.value.forEach(l=>{l.__img!==void 0&&window.URL.revokeObjectURL(l.__img.src)})}function te(){return F.value||P.value.getElementsByClassName("q-uploader__input")[0]}function ae(l,c){const S=r(l,c,a.files.value,!0),R=te();R!=null&&(R.value=""),S!==void 0&&(S.forEach(q=>{if(a.updateFileStatus(q,"idle"),n.value+=q.size,t.noThumbnails!==!0&&q.type.toUpperCase().startsWith("IMAGE")){const re=new Image;re.src=window.URL.createObjectURL(q),q.__img=re}}),a.files.value=a.files.value.concat(S),a.queuedFiles.value=a.queuedFiles.value.concat(S),u("added",S),t.autoUpload===!0&&a.upload())}function Fe(){Q.value===!0&&a.upload()}function H(l,c,S){if(l===!0){const R={type:"a",key:c,icon:b.iconSet.uploader[c],flat:!0,dense:!0};let q;return c==="add"?(R.onClick=o,q=le):R.onClick=S,s(ne,R,q)}}function le(){return s("input",{ref:F,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:t.accept,multiple:t.multiple===!0?"multiple":void 0,capture:t.capture,onMousedown:ce,onClick:o,onChange:ae})}function ye(){return p.header!==void 0?p.header(D):[s("div",{class:"q-uploader__header-content column"},[s("div",{class:"flex flex-center no-wrap q-gutter-xs"},[H(a.queuedFiles.value.length>0,"removeQueue",N),H(a.uploadedFiles.value.length>0,"removeUploaded",A),a.isUploading.value===!0?s(oe,{class:"q-uploader__spinner"}):null,s("div",{class:"col column justify-center"},[t.label!==void 0?s("div",{class:"q-uploader__title"},[t.label]):null,s("div",{class:"q-uploader__subtitle"},[v.value+" / "+C.value])]),H(m.value,"add"),H(t.hideUploadBtn===!1&&Q.value===!0,"upload",a.upload),H(a.isUploading.value,"clear",a.abort)])])]}function Se(){return p.list!==void 0?p.list(D):a.files.value.map(l=>s("div",{key:l.__key,class:"q-uploader__file relative-position"+(t.noThumbnails!==!0&&l.__img!==void 0?" q-uploader__file--img":"")+(l.__status==="failed"?" q-uploader__file--failed":l.__status==="uploaded"?" q-uploader__file--uploaded":""),style:t.noThumbnails!==!0&&l.__img!==void 0?{backgroundImage:'url("'+l.__img.src+'")'}:null},[s("div",{class:"q-uploader__file-header row flex-center no-wrap"},[l.__status==="failed"?s(Ne,{class:"q-uploader__file-status",name:b.iconSet.type.negative,color:"negative"}):null,s("div",{class:"q-uploader__file-header-content col"},[s("div",{class:"q-uploader__title"},[l.name]),s("div",{class:"q-uploader__subtitle row items-center no-wrap"},[l.__sizeLabel+" / "+l.__progressLabel])]),l.__status==="uploading"?s(Ke,{value:l.__progress,min:0,max:1,indeterminate:l.__progress===0}):s(ne,{round:!0,dense:!0,flat:!0,icon:b.iconSet.uploader[l.__status==="uploaded"?"done":"clear"],onClick:()=>{J(l)}})])]))}Qe(()=>{a.isUploading.value===!0&&a.abort(),a.files.value.length>0&&ee()});const D={};for(const l in a)Te(a[l])===!0?De(D,l,()=>a[l].value):D[l]=a[l];return Object.assign(D,{upload:Fe,reset:I,removeUploadedFiles:A,removeQueuedFiles:N,removeFile:J,pickFiles:o,addFiles:g}),Ie(D,{canAddFiles:()=>m.value,canUpload:()=>Q.value,uploadSizeLabel:()=>v.value,uploadProgressLabel:()=>C.value}),Object.assign(h,D),()=>{const l=[s("div",{class:T.value},ye()),s("div",{class:"q-uploader__list scroll"},Se()),x("uploader")];a.isBusy.value===!0&&l.push(s("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[s(oe)]));const c={ref:P,class:d.value};return m.value===!0&&Object.assign(c,{onDragover:w,onDragleave:f}),s("div",c,l)}}const tt=()=>!0;function at(e){const i={};return e.forEach(t=>{i[t]=tt}),i}const lt=at(be);var rt=({name:e,props:i,emits:t,injectPlugin:p})=>de({name:e,props:{...Je,...i},emits:Ae(t)===!0?{...lt,...t}:[...be,...t],setup(){return et(p)}});function j(e){return typeof e=="function"?e:()=>e}const ot={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},nt=["factoryFailed","uploaded","failed","uploading"];function ut({props:e,emit:i,helpers:t}){const p=k([]),u=k([]),h=k(0),b=_(()=>({url:j(e.url),method:j(e.method),headers:j(e.headers),formFields:j(e.formFields),fieldName:j(e.fieldName),withCredentials:j(e.withCredentials),sendRaw:j(e.sendRaw),batch:j(e.batch)})),E=_(()=>h.value>0),B=_(()=>u.value.length>0);let z;function U(){p.value.forEach(o=>{o.abort()}),u.value.length>0&&(z=!0)}function P(){const o=t.queuedFiles.value.slice(0);t.queuedFiles.value=[],b.value.batch(o)?F(o):o.forEach(g=>{F([g])})}function F(o){if(h.value++,typeof e.factory!="function"){a(o,{});return}const g=e.factory(o);if(!g)i("factoryFailed",new Error("QUploader: factory() does not return properly"),o),h.value--;else if(typeof g.catch=="function"&&typeof g.then=="function"){u.value.push(g);const w=f=>{t.isAlive()===!0&&(u.value=u.value.filter(r=>r!==g),u.value.length===0&&(z=!1),t.queuedFiles.value=t.queuedFiles.value.concat(o),o.forEach(r=>{t.updateFileStatus(r,"failed")}),i("factoryFailed",f,o),h.value--)};g.then(f=>{z===!0?w(new Error("Aborted")):t.isAlive()===!0&&(u.value=u.value.filter(r=>r!==g),a(o,f))}).catch(w)}else a(o,g||{})}function a(o,g){const w=new FormData,f=new XMLHttpRequest,r=(d,T)=>g[d]!==void 0?j(g[d])(T):b.value[d](T),x=r("url",o);if(!x){console.error("q-uploader: invalid or no URL specified"),h.value--;return}const L=r("formFields",o);L!==void 0&&L.forEach(d=>{w.append(d.name,d.value)});let O=0,n=0,y=0,C=0,v;f.upload.addEventListener("progress",d=>{if(v===!0)return;const T=Math.min(C,d.loaded);t.uploadedSize.value+=T-y,y=T;let I=y-n;for(let A=O;I>0&&A<o.length;A++){const N=o[A];if(I>N.size)I-=N.size,O++,n+=N.size,t.updateFileStatus(N,"uploading",N.size);else{t.updateFileStatus(N,"uploading",I);return}}},!1),f.onreadystatechange=()=>{f.readyState<4||(f.status&&f.status<400?(t.uploadedFiles.value=t.uploadedFiles.value.concat(o),o.forEach(d=>{t.updateFileStatus(d,"uploaded")}),i("uploaded",{files:o,xhr:f})):(v=!0,t.uploadedSize.value-=y,t.queuedFiles.value=t.queuedFiles.value.concat(o),o.forEach(d=>{t.updateFileStatus(d,"failed")}),i("failed",{files:o,xhr:f})),h.value--,p.value=p.value.filter(d=>d!==f))},f.open(r("method",o),x),r("withCredentials",o)===!0&&(f.withCredentials=!0);const m=r("headers",o);m!==void 0&&m.forEach(d=>{f.setRequestHeader(d.name,d.value)});const Q=r("sendRaw",o);o.forEach(d=>{t.updateFileStatus(d,"uploading",0),Q!==!0&&w.append(r("fieldName",d),d,d.name),d.xhr=f,d.__abort=()=>{f.abort()},C+=d.size}),i("uploading",{files:o,xhr:f}),p.value.push(f),Q===!0?f.send(new Blob(o)):f.send(w)}return{isUploading:E,isBusy:B,abort:U,upload:P}}var st={name:"QUploader",props:ot,emits:nt,injectPlugin:ut},it=rt(st);const dt={class:"text-h6"},ct={class:"text-subtitle2"},K=fe({__name:"offlineCard",props:{styles:String,title:String,text:String},setup(e){return(i,t)=>(pe(),me(_e,{class:Me(`my-card text-white ${e.styles}`),style:{background:"radial-gradient(circle, #35a2ff 0%, #014a88 100%)"}},{default:W(()=>[$(We,null,{default:W(()=>[Y("div",dt,se(e.title),1),Y("div",ct,se(e.text),1)]),_:1})]),_:1},8,["class"]))}}),vt={class:"row flex items-center justify-evenly"},yt=fe({__name:"Page",setup(e){return(i,t)=>{const p=ze,u=qe;return pe(),me(ke,{class:"q-mx-lg"},{default:W(()=>[$(u,{class:"q-gutter-x-sm"},{default:W(()=>[$(p,{breadcrumbs:[{label:"Home"},{label:"Offline"}]}),$(xe)]),_:1}),Y("div",vt,[$(K,{styles:"col-3",title:"File name",text:"dist"}),$(K,{styles:"col-3",title:"File Size",text:"1545665"}),$(K,{styles:"col-3",title:"File created time",text:"2023-09-12T12:00:20.809Z"}),$(_e,{class:"col-10 shadow-1 q-mt-xl"},{default:W(()=>[He(" d "),$(it,{url:"http://localhost:4444/upload",color:"teal",flat:"",bordered:"",style:{"max-width":"300px"}})]),_:1})])]),_:1})}}});export{yt as default};
